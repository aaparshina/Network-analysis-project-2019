Проект по курсу "Введение в сетевой анализ" на тему:

**ВЫБОРЫ В МОСКОВСКУЮ ГОРОДСКУЮ ДУМУ 2019 В ХЭШТЕГАХ В СОЦИАЛЬНЫХ СЕТЯХ (ИНСТАГРАМ)**

В соавторстве с aoshadrova@edu.hse.ru, eizubova@edu.hse.ru, aaminina@edu.hse.ru

**Теоретическая часть**

В 2019 году в Москве проходили выборы в Московскую городскую думу. Эта избирательная кампания ознаменовалась масштабными протестными акциями 
в поддержку не допущенных до участия в выборах депутатов. В свою очередь митинги обернулись массовыми задержаниями и заведением уголовных дел 
на некоторых их участников. Все эти события сопровождались волной постов и комментариев в социальных сетях.

Комитет ежегодного конкурса "Слово года", подводя итоги 2019 года, главным словом выбрал "протест", а также лозунг летних митингов "Допускай!"[2]. 
Хэштеги в социальных сетях являются доступным инструментом упорядочивания информации, а также позволяют кратко суммировать всё, что опубликовано в посте. 
Таким образом, хэштеги обладают достаточно широким функционалом: они позволяют маркировать тему поста, а также являются маркером связности двух и 
более сообщений[3]. Поэтому в нашем проекте мы исследуем именно хэштеги, чтобы проследить, как связаны посты с определенной тематикой между собой.

Исследование хэштегов в соцсетях с помощью сетевого анализа – не такое частое явление в социальных науках. Тем не менее, многие признают силу социальных сетей в формировании протестных движений. 
Особенно часто эту силу признают за Твиттером. Так, в похожем исследовании 2013 года исследовался хэштег
#OccupyWallStreet и его связь с другими тегами протеста[4]. Целью авторов было
изучение масштабов протеста и как на них повлияла дискуссия в Твиттере. Для этого
они формировали сеть, состоящую из наиболее значимых для протеста аккаунтов и
хэштегов, связывающих твиты по этой тематике.


В качестве площадки для анализа хэштегов нами была выбрана социальная сеть
Instagram. Это обусловлено тем, что в этой соцсети использование хэштегов позволяет
значительно увеличить аудиторию и охват публикации, поэтому они пользуются
популярностью. Чтобы привлечь как можно больше людей, интересующихся
определенной темой или событием, пользователи в описание к фотографии
перечисляют сразу несколько тегов.

Наше исследование посвящено анализу постов про выборы в Московскую
городскую думу. Мы выбрали три группы нейтральных хэштегов, которые объединяют
три достаточно значимых пункта московской политической повестки этого лета. Одна
группа посвящена Московской городской думе – в неё попали все посты по тегу
#Мосгордума, а также другие теги, перечисляемые в постах с этих хэштегом. Вторая
группа относится к митингам в поддержку кандидатов в депутаты, которые оказались
не допущены до выборов в Мосгордуму. Это хэштеги, созданные на основе лозунгов,
используемых митингующими, таких как #Допускай и т.д. И, наконец, третья группа
относится к уголовным делам, которые были заведены на участников митингов –
#московскоедело.

Именно эти хэштеги были выбраны по той причине, что они наиболее ёмко
формулируют искомый запрос и являются часто встречаемыми по сравнению с
другими тегами. Большее уточнение и удлинение хэштега, связанного с выборами в
Мосгордуму, до #выборывмосгордуму приводит к уменьшению количества постов на
эту тему.

Несмотря на то, что сами хэштеги достаточно нейтральны по своей
тональности, они могут создавать кластеры с похожими хэштегами, относящимися к
той же тематике, но более эмоционально окрашенными. Целью нашего исследования
является изучение того, как освещались события московской политики этим летом в
соцсетях и какое отношение складывалось к ним среди пользователей соцсетей.

Стоит учесть, однако, что хэштеги в Instagram нацелены на получение большего
охвата для своих публикаций, поэтому среди попавших в выборку хэштегов могут
оказаться и не связанные непосредственно с происходящими событиями. Это такие
контентные хэштеги как #москва, #лето, и т.д, которые широко используются всеми
пользователями и недостаточно узко транслируют тематику поста, а также вирусные
#лайк, #лайкивзаимно, #фото и т.д.

**Описание практической части**

Практическую часть проекта можно разделить на несколько этапов.

1. Сбор данных.

Для проекта было решено собрать собственную базу данных для построения
сети. Парсинг позволил нам собрать больший массив данных, чем при альтернативном
ручном сборе базы.

Выгрузку хэштегов из Инстаграм мы осуществили с помощью R по методу,
описанному в InstaCrawlR Instructions[5]. InstaCrawl1R - это коллекция из 4 скриптов,
которые позволяют автоматически выгрузить данные по связанным с заданным
хэштегами в постах в сети Instagram. Данные преобразуются в необходимые для
построения сети датасеты.

Работа по сбору данных состояла из нескольких стадий:

1) Для сбора данных (постов из Инстаграма по заданному хэштегу) использовали
готовый скрипт j sonReader.R. Код построен таким образом, что мы можем
прекратить скачивание данных, когда будет достигнуто желаемое количество
наблюдений. Так, изначально мы имели:

+ 2215 постов, связанных с московским делом и соответственно 3747
уникальных хэштега (т.е. упоминающихся в постах вместе с
#Московскоедело). Следует отметить, что по хэштегу #московскоедело
было собрано максимальное из возможного количество постов.
Соответственно по другим хэштегам было собрано приблизительно
столько же наблюдений, однако сбор данных для них был остановлен
намеренно, чтобы иметь приблизительно одинаковую выборку для
каждого хэштега.
+ 2105 поста было собрано по хэштегу #Мосгордума и соответственно
4894 уникальных хэштега, упоминающихся в постах вместе с ним.
+ 2218 постов было собрано по хэштегу #Допускай и соответственно 4746
уникальных хэштега, упоминающихся в постах вместе с ним.

2. Данные с помощью h ashtagExtractor.R преобразовали для построения графа.
Получили 3 датасета уникальных хэштегов (вершин) с частотой встречаемости
каждого, а также 3 датасета с (ребрами).

Данные с ребрами имели формат таблицы, в которой каждая строка
соответствовала набору хэштегов из одного поста.

3. С помощью библиотеки pandas в Python датасеты с вершинами были
отформатированы следующим образом:

a) Были удалены несодержательные хэштеги и ошибки форматирования

b) Разделены “слипшиеся” хэштеги (например, ##россиябудетсвободной)
на раздельные по знаку # (#россиябудетсвободной).

c) Все хэштеги были приведены к нижнему регистру, чтобы, например,
#СвободуЕгоруЖукову и #свободуегоружукову стали одним хэштегом.

d) Посмотрев частоту встречаемости хэштегов, было принято решение по
ограничению датасета - не менее 50 упоминаний, т.к. редко встречаемые
хэштеги не будут нести содержательного смысла и только утяжелят
граф.

e) Группам хэштегов (#Московскоедело, #Мосгордума, #Допускай) был
присвоен свой цвет.

4. Аналогично, с помощью библиотеки pandas в Python были отформатированы
датасеты с ребрами. В каждом из них были оставлены вершины, ранее отобранные как самые встречающиеся, и преобразованы в датафрейм с ребрами
(на случай, если будет необходимость просто загрузить данные для создания
графа) и список кортежей (ребер).

5. Объединили датафреймы с ребрами в один и удалили повторяющиеся значения.
Аналогично поступили с датасетами вершин.

Так, после всех преобразований, мы получили один датасет с ребрами, из
которого был построен граф, и один датасет с вершинами, в котором задан только цвет
вершины. Для каждого из ключевых хэштегов (#Московскоедело, #Мосгордума,
#Допускай) был присвоен свой цвет (немного темнее цвета группы этого хэштега),
чтобы он был виден на графе.

2. Построение графа.

Для построения графа использовали стандартную библиотеку networkx. Для
укладки вершин применяли spring_layout - с использованием Fruchterman-Reingold
force-directed algorithm. Силовые методы укладки основаны только на информации,
содержащейся в структуре графа. Это позволяет сохранять примерно одинаковую
длину ребер и получить минимальное число их пересечений, что влияет на бо льшую
читаемость графа.

Для визуализации графа использовали библиотеку plotly, т.к. она позволяет
создавать красивые и интерактивные графики, в том числе 3D. При создании 3D
графика опирались на инструкции [6] по созданию таковых.
В визуализации основного графа в качестве размера вершин была использована
степень вершины, в качестве цвета - цвет группы хэштега, к которому относится
вершина.

Далее были визуализированы меры центральности графа - Degree centrality,
Closeness centrality, Betweenness, Eigenvector, а также Page-Rank, Hubs и Authorities,
которые на визуализациях отвечали за размер и цвет вершины.

Помимо этого с помощью диаграмм рассеяния были визуализированы
зависимости значений Page-Rank Hubs и Authorities от метрик центральностей графа, а
с помощью тепловых карт - матрица смежности, коэффициент корреляции, евклидово
расстояние и косинусное расстояние осуществлен поиск эквивалентных вершин.

В завершении были визуализированы три максимальные клики: в графах был
задан единый размер вершин, не зависящий ни от какой-либо метрики, цветом же была
выделена сама клика.

3. Интерпретация полученных значений.

В ходе анализа избирательной кампании в Московскую городскую Думу в 2019
году был построен граф, который содержит 3036 ребра и 134 вершины.
Диаметр графа - это наибольшее количество вершин, которые необходимо
пройти, чтобы перейти от одной вершины к другой, когда пути, которые возвращаются
назад, обходят или замыкают, исключаются из рассмотрения. Поэтому он равен
максимуму всех значений в матрице расстояний графа. В нашем случае он равен 3.

Транзитивность графа основана на относительном количестве треугольников в графе
по сравнению с общим числом связанных троек узлов. Этот параметр принимает
значения от 0 до 1, где единица означает то, что сеть содержит все возможные ребра.
Транзитивность получившегося графа равна 0.63, что говорит о средней
транзитивности графа. Что касается плотности графа, то она определяется как
отношение количества ребер к числу возможных ребер. В нашем случае она равна 0.34,
что говорит о том, что наш граф можно назвать разряженным, потому что число ребер
не совпадает с числом вершин. Кроме того, распределение степеней вершин похоже на
степенное, что соответствует одному из свойств реальных сетей.

Также в ходе анализа мы рассматривали несколько центральностей для нашего
графа. Например, наибольшей степенью связности обладают такие вершины, как
"москва", "россия", "выборы", "политика", "мосгордума", "допускай", "митинг",
"выборы", "путин", "навальный". Это может быть связано с тем, что хэштеги Москва
или Россия популярны в Инстаграме всегда, потому что их используют многие пользователи на своих фотографиях. Все остальные хэштеги связаны с ключевым
событием в Москве этим летом - выборами, поэтому данные хэштеги не могли не
появиться в первой десятке хэштегов с максимальной степенью связности. Те же самые
хэштеги попали в топ-10 по степени близости. Помимо указанных хэштегов, по
степени посредничества попали "лдпр" и "умноеголосование". Это также связано с
оппозиционными силами, потому что Умное голосование - это проект Алексея
Навального, который направлен на борьбу с политической монополией Единой России.
Что касается ЛДПР, то эта партия принимала активное участие в выборах летом: «На
этих выборах, которые состоятся в Москве 8 сентября, мы выставили больше всего,
максимальное количество кандидатов - 45. Закрыли все округа. Другие партии меньше,
пусть даже на одного, но меньше. Средний возраст кандидатов - 35 лет»[1], - сказал
В.Жириновский. В топ-10 по степени влиятельности попал хэштег “росгвардия”,
который также символизирует выборы и митинги в Москве.

Также мы анализировали зависимость значений важность вершины от метрик:
степень связности, степень близости, степень посредничества, степень влиятельности.
В результате было выявлено, что прямая взаимосвязь присутствует между важностью
вершины и хабами (hubs) cо степенью связности, близостью и влиятельностью. Тоже
самое верно про авторитетные вершины (authorities).

Ассортативное смешивание показывает, в какой степени узлы в сети
ассоциируются с другими узлами в сети, будучи аналогичного или противоположного
типа. Как правило, ассортимент сети определяется по степени (количеству прямых
соседей) узлов в сети. В нашем случае оно равно - 0.14, что говорит о том, что наша
сеть слабо дезассортативна.

Структурно эквивалентные вершины. С помощью визуализации матрицы
расстояний и применения к ней алгоритма Cuthill-McKey мы изменили в порядок
вершин в матрицах. На полученных графиках видно, что имеем довольно много
схожих столбцов и строк, поэтому предполагаем, что в нашем графе довольно много
структурно эквивалентных вершин.

В три максимальные клики вошли связанные между собой хэштеги, например,
"полиция", "политика", "фбк", "выборы" и т.д. Все клики находятся примерно в одном
и том же месте на графе и включают в себя схожий набор вершин.

**Выводы**

Все хештеги оказались связаны в граф средней плотности. Наш выбор хештегов
оказался оправдан, т.к. на визуализации сети видно, что полученные по основным
хэштегам кластеры выделяются довольно сильно.

Прошедшие выборы можно ассоциировать в первую очередь с митингами,
уголовными делами и оппозиционными силами. Если не брать в расчет популярные
контентные хэштеги, такие как #Москва, #Россия, #выборы и тд., то прошедшие
выборы имели довольно негативную окраску среди пользователей. Здесь, стоит учесть,
что целевая аудитория сети Инстаграм - это люди от 18 до 35 лет. Поэтому негативная
оценка прошедших выборов скорее присуща молодому поколению, которые в
ближайшие десятилетия и будет составлять основной электорат на всех российских
выборах.

**Список источников**

1. ИА Москва. В.Жириновский: Кандидаты от ЛДПР в депутаты Мосгордумы
закрывают все округа столицы. 24.07.2019. URL:
https://www.mskagency.ru/materials/2911759 (дата обращения: 16.12.19)

2. «Протест», «Допускай!» и «пытки»: российский конкурс «Слово года»
подвел итоги 2019 года / Новая газета. 11 декабря 2019. URL:
https://novayagazeta.ru/news/2019/12/11/157587-protest-dopuskay-i-pytki-rossiys
kiy-konkurs-slovo-goda-podvel-itogi-2019-goda (Дата обращения: 11.12.2019)

3. Галямина Ю. Е. Лингвистический анализ хэштегов Твиттера // Современный
русский язык в интернете / ред. Я. Э. Ахапкина, Е. В. Рахилина. М.: Языки
славянской культуры, 2014. – С. 13–22.

4. Tremayne M. Anatomy of protest in the digital era: A network analysis of Twitter
and Occupy Wall Street // Social Movement Studies. – 2014. – Т. 13. – №. 1. – С.
110-126.

5. InstaCrawlR Instructions [Электронный ресурс]. URL: https://github.com/JonasSchroeder/InstaCrawlR/blob/master/InstaCrawlR%20Instructions.pdf.

6. 3D Network Graphs in Python/v3 [Электронный ресурс]. URL:  https://plotly.com/python/v3/3d-network-graph/. 
